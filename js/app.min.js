export function initThemeToggle(){let e=document.getElementById("theme-toggle");if(!e)return;let t=localStorage.getItem("theme");t&&(document.documentElement.setAttribute("data-theme",t),"dark"===t&&(e.checked=!0)),e.addEventListener("change",function(){let e="light";this.checked&&(e="dark"),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)})}export function initFormValidation(){let e=document.getElementById("cadastro-form");e&&e.addEventListener("submit",function(t){t.preventDefault(),clearErrors(e);validateFields(e)?(alert("Cadastro enviado com sucesso!"),e.reset()):alert("Formul\xe1rio com erros. Por favor, corrija os campos em vermelho.")})}function validateFields(e){let t=!0,r=e.querySelectorAll("[required]");for(let o of r)o.validity.valid||(t=!1,showError(o));return t}function showError(e){e.classList.add("field-error");let t=e.previousElementSibling,r=`O campo "${t.textContent.replace(":","")}" \xe9 obrigat\xf3rio.`;e.validity.patternMismatch&&(r=`O formato do campo "${t.textContent.replace(":","")}" est\xe1 incorreto.`);let o=document.createElement("span");o.className="form-error-text",o.textContent=r,e.parentElement.appendChild(o)}function clearErrors(e){let t=e.querySelectorAll(".form-error-text");for(let r of t)r.remove();let o=e.querySelectorAll(".field-error");for(let n of o)n.classList.remove("field-error")}import{initFormValidation}from"./validation.js";export function initSpa(){let e=document.getElementById("main-content"),t=document.querySelector(".main-nav");t&&t.addEventListener("click",function(t){let r=t.target.closest("a");if(!r)return;t.preventDefault();let o=r.getAttribute("href");if(o.startsWith("http")||o.startsWith("#")){window.location.href=o;return}loadContent(o,e),history.pushState({},"",o)})}async function loadContent(e,t){try{let r=await fetch(e);if(!r.ok)throw Error("P\xe1gina n\xe3o encontrada.");let o=await r.text(),n=new DOMParser,i=n.parseFromString(o,"text/html"),a=i.querySelector("main");a?(t.innerHTML=a.innerHTML,e.includes("cadastro.html")&&initFormValidation()):t.innerHTML="<h1>Erro ao carregar conte\xfado.</h1>"}catch(l){console.error("Erro ao carregar p\xe1gina:",l),t.innerHTML="<h1>P\xe1gina n\xe3o encontrada. (404)</h1>"}}import{initSpa}from"./spa.js";document.addEventListener("DOMContentLoaded",()=>{initSpa()});import{initSpa}from"./spa.js";import{initThemeToggle}from"./theme.js";document.addEventListener("DOMContentLoaded",()=>{initSpa(),initThemeToggle()});
